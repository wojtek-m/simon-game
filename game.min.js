function Game(){}$("#element0").on("click",function(){simonGame.processUserClick(0)}),$("#element1").on("click",function(){simonGame.processUserClick(1)}),$("#element2").on("click",function(){simonGame.processUserClick(2)}),$("#element3").on("click",function(){simonGame.processUserClick(3)}),$("#play").on("click",function(){simonGame.displaySeries()}),$("#reset").on("click",function(){simonGame.restartGame()}),$("#new").on("click",function(){simonGame.restartGame(),simonGame.displaySeries()}),$("#info-btn").on("click",function(){$("#info-panel").toggle()}),$("#info-panel").on("click",function(){$("#info-panel").toggle()}),$("#speed-toggle").toggles({width:40,height:35,text:{on:"ON",off:"OFF"}}),$("#speed-toggle").on("toggle",function(e,t){t?simonGame.toggleSpeedMode(1):simonGame.toggleSpeedMode(0)}),$("#hard-toggle").toggles({width:40,height:35,text:{on:"ON",off:"OFF"}}),$("#hard-toggle").on("toggle",function(e,t){t?simonGame.toggleHardcoreMode(1):simonGame.toggleHardcoreMode(0)});var displayFeedback=document.getElementById("feedback"),displayStage=document.getElementById("stage"),sound=new Audio,SERIES_LENGTH=20,DELAY1=1e3,DELAY2=2e3,SPEED=1e3,SPEED_MULTIPLIER=.85,speedUp=[0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0],textFeedback={correct:"Good so far, keep going.",gameOver:"Wrong, GAME OVER! You can start a new game.",nextRound:"Correct! Next round.",round:"Displaying round: ",win:"You have WON, congratulations!",wrong:"Wrong, please try again."},simonGame=new Game;Game.prototype.generateSeries=function(){for(var e=SERIES_LENGTH;e>0;e--)gameSeries.push(this.generateRandomNumber())},Game.prototype.updateGameStage=function(){gameStage+=1},Game.prototype.displaySeries=function(){var e=0;gameActive=!1,feedback=textFeedback.round+gameStage,this.updateView();for(var t=gameStage;t>0;t--){var a=gameSeries[e];this.displayElement(a,e),e+=1}setTimeout(function(){gameActive=!0},SPEED*speedIncrease*e)},Game.prototype.displayElement=function(e,t){setTimeout(function(){sound.src="http://wojtekmurawski.me/memo/sounds/animal_short"+e+".wav",sound.volume=.3,sound.play();$("#element"+e).effect("shake",{direction:"right",times:3,distance:1},50)},SPEED*speedIncrease*t)},Game.prototype.processUserClick=function(e){gameActive&&(this.displayElement(e),this.checkUserAnswer(e)?(speedModeActive&&speedUp[gameStage]&&this.increaseSpeed(SPEED_MULTIPLIER),gameStage===clickStage+1?gameStage===SERIES_LENGTH?(feedback=textFeedback.win,this.updateView()):(feedback=textFeedback.nextRound,this.updateGameStage(),this.resetClickStage(),this.updateView(),gameActive=!1,game=this,setTimeout(function(){game.displaySeries(),game.gameActive=!0},DELAY2)):(feedback=textFeedback.correct,this.updateClickStage(),this.updateView())):hardcoreModeActive?(this.restartGame(),feedback=textFeedback.gameOver,this.updateView()):(feedback=textFeedback.wrong,this.resetClickStage(),this.updateView(),game=this,gameActive=!1,setTimeout(function(){game.displaySeries(),game.gameActive=!0},DELAY2)))},Game.prototype.updateClickStage=function(){clickStage+=1},Game.prototype.resetClickStage=function(){clickStage=0},Game.prototype.checkUserAnswer=function(e){return e===gameSeries[clickStage]?!0:!1},Game.prototype.restartGame=function(){gameActive=!1,gameSeries=[],gameStage=1,clickStage=0,feedback="",speedIncrease=1;var e=$("#speed-toggle").data("toggles");speedModeActive=e.active;var t=$("#hard-toggle").data("toggles");hardcoreModeActive=t.active,this.generateSeries(),this.updateView()},Game.prototype.updateView=function(){displayFeedback.innerHTML=feedback,displayStage.innerHTML="<strong>"+gameStage+"</strong>"},Game.prototype.generateRandomNumber=function(){return Math.floor(3.99*Math.random())},Game.prototype.increaseSpeed=function(e){speedIncrease=e},Game.prototype.toggleHardcoreMode=function(e){hardcoreModeActive=1===e?!0:!1},Game.prototype.toggleSpeedMode=function(e){speedModeActive=1===e?!0:!1},Game.prototype.displaySpeedMode=function(){console.log(speedModeActive)},Game.prototype.displayHardMode=function(){console.log(hardcoreModeActive)};