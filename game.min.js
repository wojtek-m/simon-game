function Game(){this.gameActive=!1,this.gameSeries=[],this.gameStage=1,this.clickStage=0,this.feedback=""}$("#element0").on("click",function(){simonGame.processUserClick(0)}),$("#element1").on("click",function(){simonGame.processUserClick(1)}),$("#element2").on("click",function(){simonGame.processUserClick(2)}),$("#element3").on("click",function(){simonGame.processUserClick(3)}),$("#play").on("click",function(){simonGame.displaySeries()}),$("#reset").on("click",function(){simonGame.restartGame()}),$("#new").on("click",function(){simonGame.restartGame(),simonGame.displaySeries()});var feedback=document.getElementById("feedback"),sound=new Audio,SERIES_LENGTH=20,DELAY1=1e3,DELAY2=2e3,SPEED1=500,simonGame=new Game;Game.prototype.generateSeries=function(){for(var e=SERIES_LENGTH;e>0;e--)this.gameSeries.push(this.generateRandomNumber())},Game.prototype.updateGameStage=function(){this.gameStage+=1},Game.prototype.displaySeries=function(){for(var e=0,t=this.gameStage;t>0;t--){var i=this.gameSeries[e];this.displayElement(i,e),e+=1}this.gameActive=!0},Game.prototype.displayElement=function(e,t){setTimeout(function(){sound.src="https://s3.amazonaws.com/freecodecamp/simonSound"+(e+1)+".mp3",sound.play();$("#element"+e).effect("shake",{direction:"right",times:3,distance:1},50)},SPEED1*t)},Game.prototype.processUserClick=function(e){this.displayElement(e),this.gameActive?this.checkUserAnswer(e)?(this.gameStage===this.clickStage+1?(this.feedback="Correct! Next round.",this.updateView(),this.updateGameStage(),this.resetClickStage(),this.gameActive=!1,game=this,setTimeout(function(){game.displaySeries(),game.gameActive=!0},DELAY2)):(this.feedback="Correct!",this.updateClickStage(),this.updateView()),console.log("good click"),console.log("ClickStage: "+this.clickStage),console.log("GameStage: "+this.gameStage)):(console.log("bad click"),console.log("ClickStage: "+this.clickStage),console.log("GameStage: "+this.gameStage),this.feedback="Wrong, please try again.",this.resetClickStage(),this.updateView()):console.log("game inactive")},Game.prototype.updateClickStage=function(){this.clickStage+=1},Game.prototype.resetClickStage=function(){this.clickStage=0},Game.prototype.checkUserAnswer=function(e){return e===this.gameSeries[this.clickStage]?!0:!1},Game.prototype.restartGame=function(){this.gameActive=!1,this.gameSeries=[],this.gameStage=1,this.clickStage=0,this.feedback="",this.generateSeries(),this.updateView(),console.log("restart")},Game.prototype.updateView=function(){feedback.innerHTML=this.feedback},Game.prototype.generateRandomNumber=function(){return Math.floor(3.99*Math.random())};